<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Visualize PA</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/popchange_master.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

</head>

<body>

    <!-- Navigation -->
    <a id="menu-toggle" href="#" class="btn btn-dark btn-lg toggle"><i class="fa fa-bars"></i></a>
    <nav id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <a id="menu-close" href="#" class="btn btn-light btn-lg pull-right toggle"><i class="fa fa-times"></i></a>
            <li class="sidebar-brand">
                <a href="#top" onclick=$("#menu-close").click();>Start Bootstrap</a>
            </li>
            <li>
                <a href="#top" onclick=$("#menu-close").click();>Home</a>
            </li>
            <li>
                <a href="#about" onclick=$("#menu-close").click();>About</a>
            </li>
            <li>
                <a href="#services" onclick=$("#menu-close").click();>Services</a>
            </li>
            <li>
                <a href="#portfolio" onclick=$("#menu-close").click();>Portfolio</a>
            </li>
            <li>
                <a href="#contact" onclick=$("#menu-close").click();>Contact</a>
            </li>
        </ul>
    </nav>

    <!-- Header -->
    <header id="top" class="header">
        <div class="text-vertical-center">
            <h1>Pennsylvania Population Change</h1>
            <h3>Understanding the Relationship Betweeen Trends in Population Change and the 2016 Election</h3>
            <br>
        </div>
    </header>

    <!-- About -->
    <section id="about" class="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Our Midterm Presentation</h2>
                    <br>
                    <div id="myCarousel" class="carousel slide" data-ride="carousel">
                      <!-- Indicators -->
                      <ol class="carousel-indicators">
                        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#myCarousel" data-slide-to="1"></li>
                        <li data-target="#myCarousel" data-slide-to="2"></li>
                        <li data-target="#myCarousel" data-slide-to="3"></li>
                        <li data-target="#myCarousel" data-slide-to="4"></li>
                        <li data-target="#myCarousel" data-slide-to="5"></li>
                        <li data-target="#myCarousel" data-slide-to="6"></li>
                        <li data-target="#myCarousel" data-slide-to="7"></li>
                        <li data-target="#myCarousel" data-slide-to="8"></li>
                        <li data-target="#myCarousel" data-slide-to="9"></li>
                        <li data-target="#myCarousel" data-slide-to="10"></li>
                        <li data-target="#myCarousel" data-slide-to="11"></li>
                        <li data-target="#myCarousel" data-slide-to="12"></li>
                        <li data-target="#myCarousel" data-slide-to="13"></li>
                        <li data-target="#myCarousel" data-slide-to="14"></li>
                        <li data-target="#myCarousel" data-slide-to="15"></li>
                      </ol>

                      <!-- Wrapper for slides -->
                      <div class="carousel-inner" role="listbox">
                        <div class="item active">
                          <img src="img/midtermpres/pg1.jpg" alt="pg1">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg2.jpg" alt="pg2">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg3.jpg" alt="pg3">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg4.jpg" alt="pg4">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg5.jpg" alt="pg5">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg6.jpg" alt="pg6">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg7.jpg" alt="pg7">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg8.jpg" alt="pg8">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg9.jpg" alt="pg9">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg10.jpg" alt="pg10">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg11.jpg" alt="pg11">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg12.jpg" alt="pg12">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg13.jpg" alt="pg13">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg14.jpg" alt="pg14">
                        </div>

                        <div class="item">
                          <img src="img/midtermpres/pg15.jpg" alt="pg15">
                        </div>


                      <!-- Left and right controls -->
                      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                      </a>
                      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                      </a>
                    </div>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>

    <section>
        <div class="container">
                <div class="col-lg-12 text-center">
                    <h2>Some Representations of Data</h2>
                        <div> <img style="max-width:80%" src="img/PopChangeCounties.jpg">
                        <p>This chart shows historical trends from 2010 to 2015 in the change in population by county in Pennsylvania. Only a section of counties are shown here: the first ten, alphabetically, as well as Philadelphia County, and the two counties with the largest positive and negative population growth in 2015, Cumberland County and Sullivan County (accordingly).</p>
                        <p>Even from this abbreviated example, one can see that the rate of population change in Pennsylvania counties seems to have become increasingly disperate as time progressed. In 2010, the rate of population change in these counties was more similar than that in 2015, which one can see graphically as the lines on become increasingly spread out towards the right of the chart. 
                        <br>
                        <img style="max-width:90%" src="img/PopChangeMaps.jpg">
                        <p>These maps also examine population change at the county level, representing change between 2010 and 2015. The next step is to correlate them/present them side by side with election maps, as a means to see if there is any relationship between the two. </p>
                        <p> The top map shows that most population growth is concentrated in the southeast corridor of the state. However, what is perhaps surprising it that the counties that are growing the most quickly (as a proportion of their population) are not Allegany and Philadelphia Counties, but rather Center County, home of Penn State); Cumberland County, bordering Harriburg on the east, and Lebanon County, which sits betweeen the cities Harrisburg, Lancaster, and Reading.</p>
                        <p>The lower maps interrogate the sources of population change. We can see that birth rates and death rates favor population gains in southeastern and central-eastern parts of the state. Another observation is that Pennsylvania's population loss would be far worse without internaional migrants. Many counties have more residents leaving for elsewhere in the US than arriving, with the exception of the growing rural-suburban-urban (but not entirely urban) counties in the mid-southeast part of the state, such as Cumberland and Lebanon counties. Of particular note is the relatively high loss of residents in Philadelphia.</p>

                        </div>
                </div>
        </div>        
    </section>

    <section>
    <div class="container">
                <div class="col-lg-12 text-center">
                    <h2>A D3 Example</h2>
                    <br>
                </div>
        <style>
        svg {
          font: 10px sans-serif;
        }

        .y.axis path {
          display: none;
        }

        .y.axis line {
          stroke: #fff;
          stroke-opacity: .2;
          shape-rendering: crispEdges;
        }

        .y.axis .zero line {
          stroke: #000;
          stroke-opacity: 1;
        }

        .title {
          font: 300 78px Helvetica Neue;
          fill: #666;
        }

        .birthyear,
        .age {
          text-anchor: middle;
        }

        .birthyear {
          fill: #fff;
        }

        rect {
          fill-opacity: .6;
          fill: #e377c2;
        }

        rect:first-child {
          fill: #1f77b4;
        }

        </style>
        <body>
        <script src="//d3js.org/d3.v3.min.js"></script>
        <script>

        var margin = {top: 20, right: 40, bottom: 30, left: 20},
            width = 960 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom,
            barWidth = Math.floor(width / 19) - 1;

        var x = d3.scale.linear()
            .range([barWidth / 2, width - barWidth / 2]);

        var y = d3.scale.linear()
            .range([height, 0]);

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("right")
            .tickSize(-width)
            .tickFormat(function(d) { return Math.round(d / 1e6) + "M"; });

        // An SVG element with a bottom-right origin.
        var svg = d3.select("body").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        // A sliding container to hold the bars by birthyear.
        var birthyears = svg.append("g")
            .attr("class", "birthyears");

        // A label for the current year.
        var title = svg.append("text")
            .attr("class", "title")
            .attr("dy", ".71em")
            .text(2000);

        d3.csv("data/population.csv", function(error, data) {

          // Convert strings to numbers.
          data.forEach(function(d) {
            d.people = +d.people;
            d.year = +d.year;
            d.age = +d.age;
          });

          // Compute the extent of the data set in age and years.
          var age1 = d3.max(data, function(d) { return d.age; }),
              year0 = d3.min(data, function(d) { return d.year; }),
              year1 = d3.max(data, function(d) { return d.year; }),
              year = year1;

          // Update the scale domains.
          x.domain([year1 - age1, year1]);
          y.domain([0, d3.max(data, function(d) { return d.people; })]);

          // Produce a map from year and birthyear to [male, female].
          data = d3.nest()
              .key(function(d) { return d.year; })
              .key(function(d) { return d.year - d.age; })
              .rollup(function(v) { return v.map(function(d) { return d.people; }); })
              .map(data);

          // Add an axis to show the population values.
          svg.append("g")
              .attr("class", "y axis")
              .attr("transform", "translate(" + width + ",0)")
              .call(yAxis)
            .selectAll("g")
            .filter(function(value) { return !value; })
              .classed("zero", true);

          // Add labeled rects for each birthyear (so that no enter or exit is required).
          var birthyear = birthyears.selectAll(".birthyear")
              .data(d3.range(year0 - age1, year1 + 1, 5))
            .enter().append("g")
              .attr("class", "birthyear")
              .attr("transform", function(birthyear) { return "translate(" + x(birthyear) + ",0)"; });

          birthyear.selectAll("rect")
              .data(function(birthyear) { return data[year][birthyear] || [0, 0]; })
            .enter().append("rect")
              .attr("x", -barWidth / 2)
              .attr("width", barWidth)
              .attr("y", y)
              .attr("height", function(value) { return height - y(value); });

          // Add labels to show birthyear.
          birthyear.append("text")
              .attr("y", height - 4)
              .text(function(birthyear) { return birthyear; });

          // Add labels to show age (separate; not animated).
          svg.selectAll(".age")
              .data(d3.range(0, age1 + 1, 5))
            .enter().append("text")
              .attr("class", "age")
              .attr("x", function(age) { return x(year - age); })
              .attr("y", height + 4)
              .attr("dy", ".71em")
              .text(function(age) { return age; });

          // Allow the arrow keys to change the displayed year.
          window.focus();
          d3.select(window).on("keydown", function() {
            switch (d3.event.keyCode) {
              case 37: year = Math.max(year0, year - 10); break;
              case 39: year = Math.min(year1, year + 10); break;
            }
            update();
          });

          function update() {
            if (!(year in data)) return;
            title.text(year);

            birthyears.transition()
                .duration(750)
                .attr("transform", "translate(" + (x(year1) - x(year)) + ",0)");

            birthyear.selectAll("rect")
                .data(function(birthyear) { return data[year][birthyear] || [0, 0]; })
              .transition()
                .duration(750)
                .attr("y", y)
                .attr("height", function(value) { return height - y(value); });
          }
        });

        </script>
    </section>        
</body>
</html>
