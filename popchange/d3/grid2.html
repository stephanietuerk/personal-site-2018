<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
  	<title>d3 | simple square grid</title> 
  	<style>
  		.font-styles {
			  font-family: "Source Code Pro", Consolas, monaco, monospace;
			  font-size: 18px; 
			  line-height: 1.5; 
			  font-weight: 400; 
			}

			body{
			  position: relative;
			  font-family: "Source Code Pro", Consolas, monaco, monospace;
			  font-size: 18px; 
			  line-height: 1.5; 
			  font-weight: 400; 
			  color: #7AC143;
			  background-color:  #eee;
			  padding: 20px;
			}

			h4 {
			  font-size: 18px;
			}


	</style>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js" charset="utf-8"></script>
	
	  
</head>
<!-- <header><h4 id="grid-ref">roll-over grid</h4></header> -->
<body>
	<div id = "CDTotal"></div>
	<div id = "CD1"></div>
	<div id = "CD2"></div>
	<div id = "CD3"></div>
	<div id = "CD4"></div>
	<div id = "CD5"></div>
	<div id = "CD6"></div>
	<div id = "CD7"></div>
	<div id = "CD8"></div>
	<div id = "CD9"></div>
	<div id = "CD10"></div>
	<div id = "CD11"></div>
	<div id = "CD12"></div>
	<div id = "CD13"></div>
	<div id = "CD14"></div>
	<div id = "CD15"></div>
	<div id = "CD16"></div>
	<div id = "CD17"></div>
	<div id = "CD18"></div>



	<!-- Page elements and content go here. -->
	<script>

	var square = 5,
	  w = 40,
	  h = 400;

	// create the svg
	var svg = d3.select('#CD1').append('svg')
	  .attr({
	    width: w,
	    height: h
	  });

	// calculate number of rows and columns
	var squaresRow = _.round(w / square);
	var squaresColumn = _.round(h / square);

	var percentYes = 0.54;
	var percentNo = 0.46;

	var yesColor = "#e81d41";
	var noColor = "#406fea";



	// loop over number of columns
	_.times(squaresColumn, function(n) {

	  // create each set of rows
	  	var rows = svg.selectAll('rect' + ' .row-' + (n + 1))
    	.data(d3.range(squaresRow))
    	.enter().append('rect')
    	.attr({
      		// class: function(d, i) {
        // 	return 'square row-' + (n + 1) + ' ' + 'col-' + (i + 1);
      		// },
      		// id: function(d, i) {
        // 	return 's-' + (n + 1) + (i + 1);
      		// },
		    width: square,
		    height: square,
		    x: function(d, i) {
		        return i * square;
		      },
		    y: n * square,
		    cellnum: function(d, i) {
		        return ((n*squaresRow) + (i));
		      },
		    fill: '#cccccc',
		    stroke: '#ffffff',
		    //stroke: 'none'
		})
		.transition()
     		.delay(function(d) {
	     		var cell = this.getAttribute('cellnum')
	     		if (cell < (percentYes * (squaresColumn * squaresRow))) {
	     			return (cell * 1);
	     		}
	     		if (cell >= (percentYes * (squaresColumn * squaresRow))) { return (((squaresRow*squaresColumn) - cell)*1);
				}
			})
	    	.style("fill", function(d, i) {
		      	var cell = this.getAttribute('cellnum')
		      	if (cell < (percentYes * (squaresColumn * squaresRow))) {
		      		return yesColor;
		      	} 
		      	else {
		      		return noColor;
				}
		});
	    
    });
	


	
	</script>	
</body>
</html>